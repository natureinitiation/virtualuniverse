<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QWERTY –≤ –Ø–®–ï–†–¢–´</title>
    <style>
        /* --- –û–°–ù–û–í–ù–´–ï –°–¢–ò–õ–ò --- */
        body {
            font-family: Arial, sans-serif;
            margin-top: 30px;
            margin-bottom: 30px;
            background-color: #121212;
            color: #e0e0e0;
        }
        .container {
            max-width: 800px;
            margin: auto;
            background: #1e1e1e;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.5);
            margin-bottom: 20px;
        }
        h1 {
            color: #bb86fc;
            border-bottom: 2px solid #bb86fc;
            padding-bottom: 10px;
            margin-bottom: 30px;
        }
        textarea {
            width: 100%;
            padding: 15px;
            margin-bottom: 20px;
            border: 1px solid #333;
            border-radius: 4px;
            box-sizing: border-box;
            font-size: 16px;
            resize: vertical;
            background-color: #2c2c2c;
            color: #e0e0e0;
            min-height: 80px;
        }
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
        }
        /* --- –°–ö–†–´–í–ê–ï–ú –ê–ö–¢–ò–í–ù–û–ï –ü–û–õ–ï –í–í–û–î–ê --- */
        #latinInput {
            opacity: 0; 
            height: 0;
            padding: 0;
            margin-bottom: 0;
            border: none;
            overflow: hidden;
            resize: none;
        }
        /* --- –°—Ç–∏–ª–∏ –¥–ª—è —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ –ø–æ–ª—è (–¥–ª—è –∏–º–∏—Ç–∞—Ü–∏–∏ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –≤–≤–æ–¥–∞) --- */
        #cyrillicOutput {
            min-height: 120px;
            cursor: default;
        }
        .copy-button {
            padding: 10px 15px;
            font-size: 16px;
            background-color: #03dac6;
            color: #121212;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.3s;
            margin-top: 5px;
            display: block;
            width: 100%;
        }
        .copy-button:hover {
            background-color: #039c8c;
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è –ø–æ–¥–≤–∞–ª–∞ (—Å—Å—ã–ª–∫–∏) */
        .page-footer {
            max-width: 800px;
            margin: 20px auto 0;
            padding: 0 30px;
        }
        .page-footer a {
            color: #bb86fc;
            text-decoration: none;
            font-size: 14px;
        }
        .page-footer a:hover {
            text-decoration: underline;
        }
/* –°—Ç–∏–ª–∏ –¥–ª—è —á–µ—Ç—ã—Ä–µ—Ö–∫–æ–ª–æ–Ω–æ—á–Ω–æ–π —Ç–∞–±–ª–∏—Ü—ã */
    .translit-table-4col-cyr-left {
        width: 100%;
        border-collapse: separate;
        border-spacing: 0 8px;
        margin-bottom: 30px;
        color: #e0e0e0;
        table-layout: fixed;
    }
    .translit-table-4col-cyr-left th, .translit-table-4col-cyr-left td {
        padding: 10px 5px;
        text-align: center;
        vertical-align: middle;
        background-color: #2c2c2c;
    }
    .translit-table-4col-cyr-left th {
        background-color: #bb86fc;
        color: #1e1e1e;
        font-weight: bold;
        text-transform: uppercase;
        letter-spacing: 1px;
    }
    /* –°—Ç–∏–ª–∏ –¥–ª—è –ö–∏—Ä–∏–ª–ª–∏—Ü—ã (—Ç–µ–ø–µ—Ä—å –Ω–µ—á–µ—Ç–Ω—ã–µ –∫–æ–ª–æ–Ω–∫–∏) */
    .translit-table-4col-cyr-left td:nth-child(1), .translit-table-4col-cyr-left td:nth-child(3) {
        border-left: 3px solid #03dac6;
        font-size: 1.2em;
        font-weight: bold;
        color: #bb86fc; /* –¶–≤–µ—Ç –∫–∏—Ä–∏–ª–ª–∏—Ü—ã */
        border-top-left-radius: 4px; 
        border-bottom-left-radius: 4px;
    }
    /* –°—Ç–∏–ª–∏ –¥–ª—è –õ–∞—Ç–∏–Ω–∏—Ü—ã (—Ç–µ–ø–µ—Ä—å —á–µ—Ç–Ω—ã–µ –∫–æ–ª–æ–Ω–∫–∏) */
    .translit-table-4col-cyr-left td:nth-child(2), .translit-table-4col-cyr-left td:nth-child(4) {
        border-right: 3px solid #bb86fc;
        font-family: monospace;
        font-size: 1.1em;
        color: #03dac6; /* –¶–≤–µ—Ç –ª–∞—Ç–∏–Ω–∏—Ü—ã */
    }
    /* –ó–∞–≤–µ—Ä—à–∞—é—â–∏–π –∫—Ä–∞–π —Å–ø—Ä–∞–≤–∞ */
    .translit-table-4col-cyr-left td:nth-child(4) { 
        border-right-color: #03dac6; 
        border-top-right-radius: 4px; 
        border-bottom-right-radius: 4px; 
    }
    
    .section-heading-cyr-left {
        color: #03dac6;
        margin-top: 20px;
        margin-bottom: 15px;
        font-size: 1.3em;
        border-bottom: 1px dashed #333;
        padding-bottom: 5px;
    }
    </style>
</head>
<body>

<div class="container">
    <h1>QWERTY –≤ –Ø–®–ï–†–¢–´</h1>
    
    <label for="cyrillicOutput">–í–∞—à –¢–µ–∫—Å—Ç:</label>
    <textarea id="cyrillicOutput" rows="6" readonly placeholder="–¢–µ–∫—Å—Ç –ø–æ—è–≤–∏—Ç—Å—è –∑–¥–µ—Å—å..."></textarea>
    
    <button id="copyButton" class="copy-button">
        üìã –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –ö–∏—Ä–∏–ª–ª–∏—Ü—É
    </button>
    
    <p>–í–≤–µ–¥–∏—Ç–µ –∫–æ–º–±–∏–Ω–∞—Ü–∏—é –ª–∞—Ç–∏–Ω—Å–∫–∏—Ö –±—É–∫–≤ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫–∏—Ä–∏–ª–ª–∏—á–µ—Å–∫–∏—Ö</p>
<h3 class="section-heading-cyr-left">‚ú® –ì–ª–∞—Å–Ω—ã–µ –∏ –ô–æ—Ç—ã</h3>
<table class="translit-table-4col-cyr-left">
    <thead>
        <tr>
            <th>–ö–∏—Ä–∏–ª–ª–∏—Ü–∞</th>
            <th>–õ–∞—Ç–∏–Ω–∏—Ü–∞</th>
            <th>–ö–∏—Ä–∏–ª–ª–∏—Ü–∞</th>
            <th>–õ–∞—Ç–∏–Ω–∏—Ü–∞</th>
        </tr>
    </thead>
    <tbody>
        <tr><td>–ê</td><td>A</td><td>–ò</td><td>I</td></tr>
        <tr><td>”ò</td><td>AE</td><td>–û</td><td>O</td></tr>
        <tr><td>–ï</td><td>YE</td><td>”®</td><td>OE</td></tr>
        <tr><td>–Å</td><td>YO</td><td>–£</td><td>U</td></tr>
        <tr><td>–Ñ</td><td>IE</td><td>“Æ</td><td>UE</td></tr>
        <tr><td>I</td><td>II</td><td>–´</td><td>Y</td></tr>
        <tr><td>–á</td><td>YI</td><td>–≠</td><td>E</td></tr>
        <tr><td>–Æ</td><td>YU</td><td>–Ø</td><td>Q</td></tr>
        <tr><td>–Ø</td><td>YA</td><td></td><td></td></tr>
    </tbody>
</table>

<h3 class="section-heading-cyr-left">üõ°Ô∏è –°–æ–≥–ª–∞—Å–Ω—ã–µ –∏ –ó–Ω–∞–∫–∏</h3>
<table class="translit-table-4col-cyr-left">
    <thead>
        <tr>
            <th>–ö–∏—Ä–∏–ª–ª–∏—Ü–∞</th>
            <th>–õ–∞—Ç–∏–Ω–∏—Ü–∞</th>
            <th>–ö–∏—Ä–∏–ª–ª–∏—Ü–∞</th>
            <th>–õ–∞—Ç–∏–Ω–∏—Ü–∞</th>
        </tr>
    </thead>
    <tbody>
        <tr><td>–ë</td><td>B</td><td>–ú</td><td>M</td></tr>
        <tr><td>–í</td><td>V</td><td>–ù</td><td>N</td></tr>
        <tr><td>–ì</td><td>G</td><td>“¢</td><td>NG</td></tr>
        <tr><td>“ê</td><td>GG, GZ</td><td>–ü</td><td>P</td></tr>
        <tr><td>–î</td><td>D</td><td>–†</td><td>R</td></tr>
        <tr><td>–ñ</td><td>ZH</td><td>–°</td><td>S</td></tr>
        <tr><td>–ó</td><td>Z</td><td>–¢</td><td>T</td></tr>
        <tr><td>–ô</td><td>J</td><td>–§</td><td>F</td></tr>
        <tr><td>–ö</td><td>K</td><td>–•</td><td>X</td></tr>
        <tr><td>–õ</td><td>L</td><td>–¶</td><td>CZ, TS</td></tr>
        <tr><td>–ß</td><td>CH</td><td>–®</td><td>SH, W</td></tr>
        <tr><td>–©</td><td>SHH, SCH, CSH</td><td>“∫</td><td>KH, H</td></tr>
        <tr><td>–™</td><td>'''</td><td>‚Äî</td><td>---</td></tr>
        <tr><td>–¨</td><td>''</td><td>‚Äì</td><td>--</td></tr>
    </tbody>
</table>
    <label for="latinInput" style="display: none;">–ê–∫—Ç–∏–≤–Ω—ã–π –í–≤–æ–¥ (–°–∫—Ä—ã—Ç):</label>
    <textarea id="latinInput" rows="2" placeholder="–ù–∞—á–Ω–∏—Ç–µ –≤–≤–æ–¥–∏—Ç—å"></textarea>

</div>

<div class="page-footer">
    <a href="https://eugenebox.t.me/" target="_blank">
        Help
    </a>
</div>

<script>
    const MAPPING_LOWERCASE_BASE = new Map([
        ['q','—è'], ['w','—à'], ['zh','–∂'],['ch','—á'],['sh','—à'],['shh','—â'],['sch','—â'],['csh','—â'],['cz','—Ü'],['ts','—Ü'],
        ['yu','—é'],['ya','—è'],['yo','—ë'],['ie','—î'],['yi','—ó'],['ye','–µ'],['ii','—ñ'],['e','—ç'],['j','–π'],['y','—ã'],
        ['gg','“ë'],['gz','“ë'],['ng','“£'],['ae','”ô'],['ue','“Ø'],['oe','”©'],['kh','“ª'],['h','“ª'],
        ['a','–∞'],['b','–±'],['v','–≤'],['g','–≥'],['d','–¥'],['k','–∫'],['l','–ª'],['m','–º'],['n','–Ω'],['o','–æ'],
        ['p','–ø'],['r','—Ä'],['s','—Å'],['t','—Ç'],['u','—É'],['f','—Ñ'],['x','—Ö'],['z','–∑'],['i','–∏'],
        ["---","‚Äî"],["--","‚Äì"]
    ]);

    function generateCaseVariations(str, cyr) {
        const vars = new Map();
        const len = str.length;
        for (let i = 0; i < (1 << len); i++) {
            let key = '', allUpper = true;
            for (let j = 0; j < len; j++) {
                if (i & (1 << j)) key += str[j].toUpperCase();
                else { key += str[j]; allUpper = false; }
            }
            vars.set(key, allUpper ? cyr.toUpperCase() : cyr);
        }
        return vars;
    }

    const MAPPING = new Map();
    " .,!?0123456789".split('').forEach(c => MAPPING.set(c, c));
    MAPPING.set(' ', ' ');

    for (const [lat, cyr] of MAPPING_LOWERCASE_BASE) {
        if (lat.length > 1) {
            for (const [k, v] of generateCaseVariations(lat, cyr)) MAPPING.set(k, v);
        } else {
            MAPPING.set(lat, cyr);
            MAPPING.set(lat.toUpperCase(), cyr.toUpperCase());
        }
    }

    // —å –∏ —ä ‚Äî –í–°–ï–ì–î–ê –º–∞–ª–µ–Ω—å–∫–∏–µ (–∫–∞–∫ —Ö–æ—á–µ—Ç 99 % –ª—é–¥–µ–π)
    ["''","'' ","''.","'',","''!","''?"].forEach(k => MAPPING.set(k, '—å'));
    ["'''","''' ","'''.","'''!","'''?"].forEach(k => MAPPING.set(k, '—ä'));
    MAPPING.set('---','‚Äî'); MAPPING.set('--','‚Äì');

    const sorted_keys = Array.from(MAPPING.keys()).sort((a,b) => b.length - a.length);

    function transcodeToCyrillic(t) {
        if (!t) return '';
        let r = '', i = 0;
        while (i < t.length) {
            let m = false;
            for (const k of sorted_keys) {
                if (t.startsWith(k, i)) {
                    r += MAPPING.get(k);
                    i += k.length;
                    m = true;
                    break;
                }
            }
            if (!m) { r += t[i]; i++; }
        }
        return r;
    }

    const input = document.getElementById('latinInput');
    const output = document.getElementById('cyrillicOutput');
    const copy = document.getElementById('copyButton');

    input.addEventListener('input', () => output.value = transcodeToCyrillic(input.value));
    document.addEventListener('click', () => input.focus());
    document.addEventListener('touchstart', () => input.focus());

    copy.addEventListener('click', () => {
        if (output.value && navigator.clipboard) {
            navigator.clipboard.writeText(output.value).then(() => {
                copy.textContent = '–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ!';
                setTimeout(() => copy.textContent = '–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –ö–∏—Ä–∏–ª–ª–∏—Ü—É', 1500);
            });
        }
        input.focus();
    });

    input.focus();
</script>
</body>
</html>
