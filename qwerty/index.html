<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QWERTY –≤ –Ø–®–ï–†–¢–´</title>
    <style>
        /* --- –û–°–ù–û–í–ù–´–ï –°–¢–ò–õ–ò --- */
        body {
            font-family: Arial, sans-serif;
            margin-top: 30px;
            margin-bottom: 30px;
            background-color: #121212;
            color: #e0e0e0;
        }
        .container {
            max-width: 800px;
            margin: auto;
            background: #1e1e1e;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.5);
            margin-bottom: 20px;
        }
        h1 {
            color: #bb86fc;
            border-bottom: 2px solid #bb86fc;
            padding-bottom: 10px;
            margin-bottom: 30px;
        }
        textarea {
            width: 100%;
            padding: 15px;
            margin-bottom: 20px;
            border: 1px solid #333;
            border-radius: 4px;
            box-sizing: border-box;
            font-size: 16px;
            resize: vertical;
            background-color: #2c2c2c;
            color: #e0e0e0;
            min-height: 80px;
        }
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
        }
        /* --- –°–ö–†–´–í–ê–ï–ú –ê–ö–¢–ò–í–ù–û–ï –ü–û–õ–ï –í–í–û–î–ê --- */
        #latinInput {
            opacity: 0; 
            height: 0;
            padding: 0;
            margin-bottom: 0;
            border: none;
            overflow: hidden;
            resize: none;
        }
        /* --- –°—Ç–∏–ª–∏ –¥–ª—è —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ –ø–æ–ª—è (–¥–ª—è –∏–º–∏—Ç–∞—Ü–∏–∏ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –≤–≤–æ–¥–∞) --- */
        #cyrillicOutput {
            min-height: 120px;
            cursor: default;
        }
        .copy-button {
            padding: 10px 15px;
            font-size: 16px;
            background-color: #03dac6;
            color: #121212;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.3s;
            margin-top: 5px;
            display: block;
            width: 100%;
        }
        .copy-button:hover {
            background-color: #039c8c;
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è –ø–æ–¥–≤–∞–ª–∞ (—Å—Å—ã–ª–∫–∏) */
        .page-footer {
            max-width: 800px;
            margin: 20px auto 0;
            padding: 0 30px;
        }
        .page-footer a {
            color: #bb86fc;
            text-decoration: none;
            font-size: 14px;
        }
        .page-footer a:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>

<div class="container">
    <h1>QWERTY –≤ –Ø–®–ï–†–¢–´</h1>
    
    <label for="cyrillicOutput">–í–∞—à –¢–µ–∫—Å—Ç:</label>
    <textarea id="cyrillicOutput" rows="6" readonly placeholder="–¢–µ–∫—Å—Ç –ø–æ—è–≤–∏—Ç—Å—è –∑–¥–µ—Å—å..."></textarea>
    
    <button id="copyButton" class="copy-button">
        üìã –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –ö–∏—Ä–∏–ª–ª–∏—Ü—É
    </button>
    
    <p>–í–≤–µ–¥–∏—Ç–µ –∫–æ–º–±–∏–Ω–∞—Ü–∏—é –ª–∞—Ç–∏–Ω—Å–∫–∏—Ö –±—É–∫–≤ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫–∏—Ä–∏–ª–ª–∏—á–µ—Å–∫–∏—Ö (–≤–∫–ª—é—á–∞—è —É–∫—Ä–∞–∏–Ω—Å–∫–∏–µ ): <br/> ZH –¥–ª—è –ñ <br/> CH ‚Äî –ß <br/>  SH ‚Äî –® <br/> SHH, SCH –∏–ª–∏ CSH ‚Äî –© <br/> E ‚Äî –≠ <br/> IE ‚Äî –Ñ <br/> YE ‚Äî –ï <br/> YO ‚Äî –Å <br/> YU ‚Äî –Æ <br/> IE ‚Äî –ï <br/> YA ‚Äî –Ø <br/> CZ –∏–ª–∏ TS ‚Äî –¶ <br/> II ‚Äî I <br/> YI ‚Äî –á <br/> GG ‚Äî “ê <br/> GZ ‚Äî “ê <br/> NG ‚Äî “¢ <br/> AE ‚Äî ”ò <br/> UE ‚Äî “Æ <br/> OE ‚Äî ”® <br/> KH ‚Äî “∫ <br/> H ‚Äî “∫ <br/> ''' ‚Äî –™ <br/> '' ‚Äî –¨ <br/> --- –¥–ª–∏–Ω–Ω–æ–µ —Ç–∏—Ä–µ <br/> -- –º–∏–Ω—É—Å</p>

    <label for="latinInput" style="display: none;">–ê–∫—Ç–∏–≤–Ω—ã–π –í–≤–æ–¥ (–°–∫—Ä—ã—Ç):</label>
    <textarea id="latinInput" rows="2" placeholder="–ù–∞—á–Ω–∏—Ç–µ –≤–≤–æ–¥–∏—Ç—å"></textarea>

</div>

<div class="page-footer">
    <a href="https://eugenebox.t.me/" target="_blank">
        Help
    </a>
</div>

<script>
    const MAPPING_LOWERCASE_BASE = new Map([
        ['q','—è'], ['w','—à'], ['zh','–∂'],['ch','—á'],['sh','—à'],['shh','—â'],['sch','—â'],['csh','—â'],['cz','—Ü'],['ts','—Ü'],
        ['yu','—é'],['ya','—è'],['yo','—ë'],['ie','—î'],['yi','—ó'],['ye','–µ'],['ii','—ñ'],['e','—ç'],['j','–π'],['y','—ã'],
        ['gg','“ë'],['gz','“ë'],['ng','“£'],['ae','”ô'],['ue','“Ø'],['oe','”©'],['kh','“ª'],['h','“ª'],
        ['a','–∞'],['b','–±'],['v','–≤'],['g','–≥'],['d','–¥'],['k','–∫'],['l','–ª'],['m','–º'],['n','–Ω'],['o','–æ'],
        ['p','–ø'],['r','—Ä'],['s','—Å'],['t','—Ç'],['u','—É'],['f','—Ñ'],['x','—Ö'],['z','–∑'],['i','–∏'],
        ["---","‚Äî"],["--","‚Äì"]
    ]);

    function generateCaseVariations(str, cyr) {
        const vars = new Map();
        const len = str.length;
        for (let i = 0; i < (1 << len); i++) {
            let key = '', allUpper = true;
            for (let j = 0; j < len; j++) {
                if (i & (1 << j)) key += str[j].toUpperCase();
                else { key += str[j]; allUpper = false; }
            }
            vars.set(key, allUpper ? cyr.toUpperCase() : cyr);
        }
        return vars;
    }

    const MAPPING = new Map();
    " .,!?0123456789".split('').forEach(c => MAPPING.set(c, c));
    MAPPING.set(' ', ' ');

    for (const [lat, cyr] of MAPPING_LOWERCASE_BASE) {
        if (lat.length > 1) {
            for (const [k, v] of generateCaseVariations(lat, cyr)) MAPPING.set(k, v);
        } else {
            MAPPING.set(lat, cyr);
            MAPPING.set(lat.toUpperCase(), cyr.toUpperCase());
        }
    }

    // —å –∏ —ä ‚Äî –í–°–ï–ì–î–ê –º–∞–ª–µ–Ω—å–∫–∏–µ (–∫–∞–∫ —Ö–æ—á–µ—Ç 99 % –ª—é–¥–µ–π)
    ["''","'' ","''.","'',","''!","''?"].forEach(k => MAPPING.set(k, '—å'));
    ["'''","''' ","'''.","'''!","'''?"].forEach(k => MAPPING.set(k, '—ä'));
    MAPPING.set('---','‚Äî'); MAPPING.set('--','‚Äì');

    const sorted_keys = Array.from(MAPPING.keys()).sort((a,b) => b.length - a.length);

    function transcodeToCyrillic(t) {
        if (!t) return '';
        let r = '', i = 0;
        while (i < t.length) {
            let m = false;
            for (const k of sorted_keys) {
                if (t.startsWith(k, i)) {
                    r += MAPPING.get(k);
                    i += k.length;
                    m = true;
                    break;
                }
            }
            if (!m) { r += t[i]; i++; }
        }
        return r;
    }

    const input = document.getElementById('latinInput');
    const output = document.getElementById('cyrillicOutput');
    const copy = document.getElementById('copyButton');

    input.addEventListener('input', () => output.value = transcodeToCyrillic(input.value));
    document.addEventListener('click', () => input.focus());
    document.addEventListener('touchstart', () => input.focus());

    copy.addEventListener('click', () => {
        if (output.value && navigator.clipboard) {
            navigator.clipboard.writeText(output.value).then(() => {
                copy.textContent = '–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ!';
                setTimeout(() => copy.textContent = '–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –ö–∏—Ä–∏–ª–ª–∏—Ü—É', 1500);
            });
        }
        input.focus();
    });

    input.focus();
</script>
</body>
</html>
